{"ast":null,"code":"import React,{useEffect,useState}from'react';import{CheckCircle,XCircle,Loader2}from'lucide-react';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function OAuthCallback(){const[status,setStatus]=useState('processing');const[message,setMessage]=useState('Processing authorization...');useEffect(()=>{const urlParams=new URLSearchParams(window.location.search);const code=urlParams.get('code');const error=urlParams.get('error');if(error){setStatus('error');setMessage(\"Authorization failed: \".concat(error));return;}if(!code){setStatus('error');setMessage('No authorization code received');return;}// Send code to backend for token exchange\nexchangeCodeForToken(code);},[]);async function exchangeCodeForToken(code){try{// In production, this would call your backend API\n// For now, we'll simulate the success\nsetTimeout(()=>{setStatus('success');setMessage('Google Calendar access granted successfully!');// Store in localStorage that auth was successful\nlocalStorage.setItem('google_auth_success','true');localStorage.setItem('google_auth_time',new Date().toISOString());// Redirect back to dashboard after 3 seconds\nsetTimeout(()=>{window.location.href='/';},3000);},1500);}catch(err){setStatus('error');setMessage('Failed to complete authorization');}}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-raven-bg flex items-center justify-center p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full bg-raven-card rounded-2xl p-8 border border-raven-border text-center\",children:[status==='processing'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{className:\"w-16 h-16 text-raven-orange mx-auto mb-4 animate-spin\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-2\",children:\"Authorizing...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-raven-muted\",children:message})]}),status==='success'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-16 h-16 text-green-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-2 text-green-400\",children:\"Success!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-raven-muted mb-4\",children:message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted\",children:\"Redirecting to dashboard...\"})]}),status==='error'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(XCircle,{className:\"w-16 h-16 text-red-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-2 text-red-400\",children:\"Authorization Failed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-raven-muted mb-4\",children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/',className:\"px-6 py-2 bg-raven-orange text-white rounded-lg hover:bg-raven-orange/80 transition-colors\",children:\"Back to Dashboard\"})]})]})});}","map":{"version":3,"names":["React","useEffect","useState","CheckCircle","XCircle","Loader2","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","OAuthCallback","status","setStatus","message","setMessage","urlParams","URLSearchParams","window","location","search","code","get","error","concat","exchangeCodeForToken","setTimeout","localStorage","setItem","Date","toISOString","href","err","className","children","onClick"],"sources":["/root/.openclaw/workspace/projects/raven-ops-center/src/pages/OAuthCallback.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { CheckCircle, XCircle, Loader2 } from 'lucide-react';\n\nexport default function OAuthCallback() {\n  const [status, setStatus] = useState<'processing' | 'success' | 'error'>('processing');\n  const [message, setMessage] = useState('Processing authorization...');\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n    const error = urlParams.get('error');\n\n    if (error) {\n      setStatus('error');\n      setMessage(`Authorization failed: ${error}`);\n      return;\n    }\n\n    if (!code) {\n      setStatus('error');\n      setMessage('No authorization code received');\n      return;\n    }\n\n    // Send code to backend for token exchange\n    exchangeCodeForToken(code);\n  }, []);\n\n  async function exchangeCodeForToken(code: string) {\n    try {\n      // In production, this would call your backend API\n      // For now, we'll simulate the success\n      setTimeout(() => {\n        setStatus('success');\n        setMessage('Google Calendar access granted successfully!');\n        \n        // Store in localStorage that auth was successful\n        localStorage.setItem('google_auth_success', 'true');\n        localStorage.setItem('google_auth_time', new Date().toISOString());\n        \n        // Redirect back to dashboard after 3 seconds\n        setTimeout(() => {\n          window.location.href = '/';\n        }, 3000);\n      }, 1500);\n    } catch (err) {\n      setStatus('error');\n      setMessage('Failed to complete authorization');\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-raven-bg flex items-center justify-center p-6\">\n      <div className=\"max-w-md w-full bg-raven-card rounded-2xl p-8 border border-raven-border text-center\">\n        {status === 'processing' && (\n          <>\n            <Loader2 className=\"w-16 h-16 text-raven-orange mx-auto mb-4 animate-spin\" />\n            <h2 className=\"text-2xl font-bold mb-2\">Authorizing...</h2>\n            <p className=\"text-raven-muted\">{message}</p>\n          </>\n        )}\n\n        {status === 'success' && (\n          <>\n            <CheckCircle className=\"w-16 h-16 text-green-400 mx-auto mb-4\" />\n            <h2 className=\"text-2xl font-bold mb-2 text-green-400\">Success!</h2>\n            <p className=\"text-raven-muted mb-4\">{message}</p>\n            <p className=\"text-sm text-raven-muted\">Redirecting to dashboard...</p>\n          </>\n        )}\n\n        {status === 'error' && (\n          <>\n            <XCircle className=\"w-16 h-16 text-red-400 mx-auto mb-4\" />\n            <h2 className=\"text-2xl font-bold mb-2 text-red-400\">Authorization Failed</h2>\n            <p className=\"text-raven-muted mb-4\">{message}</p>\n            <button\n              onClick={() => window.location.href = '/'}\n              className=\"px-6 py-2 bg-raven-orange text-white rounded-lg hover:bg-raven-orange/80 transition-colors\"\n            >\n              Back to Dashboard\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}