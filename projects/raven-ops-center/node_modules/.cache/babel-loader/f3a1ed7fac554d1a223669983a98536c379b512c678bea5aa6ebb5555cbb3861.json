{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{Pause,SkipBack,SkipForward,Heart,Clock,Music,TrendingUp,Search,Database,Disc,Loader2,PlayCircle,Sparkles,BarChart3,Star}from'lucide-react';import StatCard from'../components/StatCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='/api/spotify';export default function Spotify(){var _detailedStats$topArt;const[activeTab,setActiveTab]=useState('recent');const[searchQuery,setSearchQuery]=useState('');const[nowPlaying,setNowPlaying]=useState(null);const[recentTracks,setRecentTracks]=useState([]);const[database,setDatabase]=useState({plays:[],raw:''});const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[controlling,setControlling]=useState(false);const tabs=[{id:'recent',label:'Recent',icon:Clock},{id:'database',label:'Database',icon:Database},{id:'stats',label:'Stats',icon:TrendingUp},{id:'discover',label:'Discover',icon:Disc}];useEffect(()=>{fetchData();const interval=setInterval(fetchNowPlaying,10000);return()=>clearInterval(interval);},[]);async function fetchData(){setLoading(true);try{await Promise.all([fetchNowPlaying(),fetchRecentTracks(),fetchDatabase(),fetchStats()]);}catch(err){setError('Failed to load Spotify data');}finally{setLoading(false);}}async function fetchNowPlaying(){try{const response=await fetch(\"\".concat(API_BASE,\"/now-playing\"));const data=await response.json();setNowPlaying(data);}catch(err){console.error('Now playing error:',err);}}async function fetchRecentTracks(){try{const response=await fetch(\"\".concat(API_BASE,\"/recent-tracks\"));const data=await response.json();setRecentTracks(data);}catch(err){console.error('Recent tracks error:',err);}}async function fetchDatabase(){try{const response=await fetch(\"\".concat(API_BASE,\"/database\"));const data=await response.json();setDatabase(data);}catch(err){console.error('Database error:',err);}}async function fetchStats(){try{const response=await fetch(\"\".concat(API_BASE,\"/stats\"));const data=await response.json();setStats(data);}catch(err){console.error('Stats error:',err);}}async function controlPlayer(action){setControlling(true);try{const response=await fetch(\"\".concat(API_BASE,\"/\").concat(action),{method:'POST'});const result=await response.json();if(result.success){setTimeout(fetchNowPlaying,500);}}catch(err){console.error('Control error:',err);}finally{setControlling(false);}}// Calculate detailed stats from database\nconst detailedStats=useMemo(()=>{if(!database.plays.length)return null;const plays=database.plays;// Artist frequency\nconst artistCounts={};plays.forEach(play=>{artistCounts[play.artist]=(artistCounts[play.artist]||0)+1;});const topArtists=Object.entries(artistCounts).map(_ref=>{let[name,plays]=_ref;return{name,plays,percentage:0};}).sort((a,b)=>b.plays-a.plays).slice(0,10);// Calculate percentages\nconst totalPlays=plays.length;topArtists.forEach(artist=>{artist.percentage=Math.round(artist.plays/totalPlays*100);});// Time-based stats (assuming ~3 min per song average)\nconst avgSongDuration=3;const totalMinutes=plays.length*avgSongDuration;const totalHours=Math.floor(totalMinutes/60);// Parse dates for time-based analysis\nconst now=new Date();const today=now.toISOString().split('T')[0];const weekAgo=new Date(now.getTime()-7*24*60*60*1000).toISOString().split('T')[0];const monthAgo=new Date(now.getTime()-30*24*60*60*1000).toISOString().split('T')[0];const timeStats={today:plays.filter(p=>p.date===today).length,thisWeek:plays.filter(p=>p.date>=weekAgo).length,thisMonth:plays.filter(p=>p.date>=monthAgo).length,total:plays.length};// Extract unique albums\nconst albumCounts={};plays.forEach(play=>{const key=\"\".concat(play.album,\"|\").concat(play.artist);if(!albumCounts[key]){albumCounts[key]={artist:play.artist,count:0};}albumCounts[key].count++;});const topAlbums=Object.entries(albumCounts).map(_ref2=>{let[key,data]=_ref2;const[album]=key.split('|');return{album,artist:data.artist,plays:data.count};}).sort((a,b)=>b.plays-a.plays).slice(0,5);return{topArtists,timeStats,topAlbums,totalListeningHours:totalHours,avgDailyPlays:Math.round(totalPlays/Math.max(1,plays.length>0?(new Date(plays[0].date).getTime()-new Date(plays[plays.length-1].date).getTime())/(1000*60*60*24):1))};},[database.plays]);const[recommendations,setRecommendations]=useState([]);const[discoverLoading,setDiscoverLoading]=useState(true);// Fetch recommendations from API\nuseEffect(()=>{async function fetchDiscover(){try{setDiscoverLoading(true);const response=await fetch(\"\".concat(API_BASE,\"/discover\"));if(response.ok){const data=await response.json();setRecommendations(data);}}catch(err){console.error('Discover fetch error:',err);setRecommendations([]);}finally{setDiscoverLoading(false);}}fetchDiscover();},[]);function formatDuration(ms){const totalSeconds=Math.floor(ms/1000);const minutes=Math.floor(totalSeconds/60);const seconds=(totalSeconds%60).toString().padStart(2,'0');return\"\".concat(minutes,\":\").concat(seconds);}const filteredDatabase=database.plays.filter(play=>searchQuery===''||play.track.toLowerCase().includes(searchQuery.toLowerCase())||play.artist.toLowerCase().includes(searchQuery.toLowerCase())||play.album.toLowerCase().includes(searchQuery.toLowerCase()));if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-96\",children:/*#__PURE__*/_jsx(Loader2,{className:\"animate-spin text-raven-orange\",size:48})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-3xl font-bold mb-2\",children:[\"Spotify \",/*#__PURE__*/_jsx(\"span\",{className:\"gradient-text\",children:\"Command Center\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-raven-muted\",children:\"Your music intelligence and listening analytics.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-raven-card to-raven-bg rounded-2xl p-6 border border-raven-border sticky top-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold mb-6 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Music,{className:\"text-raven-teal\",size:20}),\"Now Playing\"]}),nowPlaying!==null&&nowPlaying!==void 0&&nowPlaying.isPlaying&&nowPlaying.track?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-48 h-48 mx-auto mb-6 rounded-xl overflow-hidden shadow-2xl\",children:nowPlaying.track.image?/*#__PURE__*/_jsx(\"img\",{src:nowPlaying.track.image,alt:nowPlaying.track.name,className:\"w-full h-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full bg-gradient-to-br from-raven-orange to-raven-teal flex items-center justify-center\",children:/*#__PURE__*/_jsx(Music,{size:64,className:\"text-white\"})})}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-xl font-bold mb-1\",children:nowPlaying.track.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-raven-muted mb-4\",children:nowPlaying.track.artist}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted mb-6\",children:nowPlaying.track.album}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-1 bg-raven-border rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r from-raven-orange to-raven-teal rounded-full transition-all\",style:{width:\"\".concat(nowPlaying.track.progress_ms/nowPlaying.track.duration_ms*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between text-xs text-raven-muted mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatDuration(nowPlaying.track.progress_ms)}),/*#__PURE__*/_jsx(\"span\",{children:formatDuration(nowPlaying.track.duration_ms)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>controlPlayer('previous'),disabled:controlling,className:\"p-2 text-raven-muted hover:text-raven-text transition-colors disabled:opacity-50\",children:/*#__PURE__*/_jsx(SkipBack,{size:24})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>controlPlayer('pause'),disabled:controlling,className:\"w-14 h-14 rounded-full bg-gradient-to-br from-raven-orange to-raven-teal flex items-center justify-center text-white hover:scale-105 transition-transform disabled:opacity-50\",children:/*#__PURE__*/_jsx(Pause,{size:28})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>controlPlayer('next'),disabled:controlling,className:\"p-2 text-raven-muted hover:text-raven-text transition-colors disabled:opacity-50\",children:/*#__PURE__*/_jsx(SkipForward,{size:24})})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"mt-6 w-full py-3 rounded-lg border border-raven-border text-raven-muted hover:text-raven-orange hover:border-raven-orange transition-colors flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Heart,{size:18}),\"Add to Database\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 mx-auto mb-6 rounded-xl bg-raven-border flex items-center justify-center\",children:/*#__PURE__*/_jsx(Music,{size:48,className:\"text-raven-muted\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-raven-muted mb-4\",children:\"Nothing playing right now\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>controlPlayer('play'),disabled:controlling,className:\"px-6 py-3 rounded-full bg-gradient-to-br from-raven-orange to-raven-teal text-white hover:scale-105 transition-transform disabled:opacity-50 flex items-center gap-2 mx-auto\",children:[/*#__PURE__*/_jsx(PlayCircle,{size:20}),\"Resume Playback\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsx(StatCard,{label:\"Total Tracks\",value:(stats===null||stats===void 0?void 0:stats.totalTracks.toString())||(detailedStats===null||detailedStats===void 0?void 0:detailedStats.timeStats.total.toString())||'0',icon:Database,color:\"from-raven-orange to-orange-400\",trend:\"In database\"}),/*#__PURE__*/_jsx(StatCard,{label:\"Listening Time\",value:detailedStats?\"\".concat(detailedStats.totalListeningHours,\"h\"):(stats===null||stats===void 0?void 0:stats.listeningTime)||'0h',icon:Clock,color:\"from-raven-teal to-teal-400\",trend:\"Estimated\"}),/*#__PURE__*/_jsx(StatCard,{label:\"Top Artist\",value:(detailedStats===null||detailedStats===void 0?void 0:(_detailedStats$topArt=detailedStats.topArtists[0])===null||_detailedStats$topArt===void 0?void 0:_detailedStats$topArt.name)||(stats===null||stats===void 0?void 0:stats.topArtist)||'Unknown',icon:Music,color:\"from-purple-500 to-pink-500\",trend:\"Most played\"}),/*#__PURE__*/_jsx(StatCard,{label:\"Unique Artists\",value:(stats===null||stats===void 0?void 0:stats.uniqueArtists.toString())||(detailedStats===null||detailedStats===void 0?void 0:detailedStats.topArtists.length.toString())||'0',icon:TrendingUp,color:\"from-blue-500 to-cyan-500\",trend:\"All time\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-raven-card rounded-xl border border-raven-border overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex border-b border-raven-border\",children:tabs.map(tab=>{const Icon=tab.icon;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"flex-1 flex items-center justify-center gap-2 py-4 text-sm font-medium transition-colors \".concat(activeTab===tab.id?'text-raven-orange border-b-2 border-raven-orange bg-raven-orange/5':'text-raven-muted hover:text-raven-text'),children:[/*#__PURE__*/_jsx(Icon,{size:16}),tab.label]},tab.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[activeTab==='recent'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-4\",children:\"Recently Played (Last 3)\"}),recentTracks.length>0?recentTracks.slice(0,3).map((track,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 p-4 rounded-lg bg-raven-bg border border-raven-border hover:border-raven-orange/30 transition-colors\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 rounded-lg bg-gradient-to-br from-raven-orange/20 to-raven-teal/20 flex items-center justify-center\",children:/*#__PURE__*/_jsx(Music,{size:20,className:\"text-raven-muted\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-raven-text\",children:track.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-raven-muted\",children:[track.artist,\" \\u2022 \",track.album]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted\",children:track.duration}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-raven-muted\",children:track.playedAt})]})]},index)):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-raven-muted\",children:[/*#__PURE__*/_jsx(Music,{size:48,className:\"mx-auto mb-4 opacity-30\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No recent tracks from Spotify API\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Check Database tab for your history\"})]})]}),activeTab==='database'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-raven-muted\",size:18}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search your music database...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"w-full bg-raven-bg border border-raven-border rounded-lg pl-10 pr-4 py-2 text-sm text-raven-text placeholder-raven-muted focus:outline-none focus:border-raven-orange transition-colors\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 rounded-lg bg-raven-orange text-white text-sm hover:bg-raven-orange/80 transition-colors\",children:\"Export CSV\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-raven-muted mb-4\",children:[\"Showing \",filteredDatabase.length,\" tracks from your database\"]}),filteredDatabase.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-96 overflow-y-auto\",children:filteredDatabase.map((play,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 p-3 rounded-lg bg-raven-bg border border-raven-border hover:border-raven-orange/30 transition-colors\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-gradient-to-br from-raven-orange/20 to-raven-teal/20 flex items-center justify-center flex-shrink-0\",children:/*#__PURE__*/_jsx(Music,{size:16,className:\"text-raven-muted\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-raven-text truncate\",children:play.track}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-raven-muted truncate\",children:[play.artist,\" \\u2022 \",play.album]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right text-xs text-raven-muted\",children:[/*#__PURE__*/_jsx(\"p\",{children:play.date}),/*#__PURE__*/_jsx(\"p\",{children:play.time})]})]},index))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 text-raven-muted\",children:[/*#__PURE__*/_jsx(Database,{size:48,className:\"mx-auto mb-4 opacity-30\"}),/*#__PURE__*/_jsx(\"p\",{children:searchQuery?'No tracks match your search':'No tracks in database'})]})]}),activeTab==='stats'&&detailedStats&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-raven-bg rounded-xl p-4 border border-raven-border text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-raven-orange\",children:detailedStats.timeStats.today}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted\",children:\"Today\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-raven-bg rounded-xl p-4 border border-raven-border text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-raven-teal\",children:detailedStats.timeStats.thisWeek}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted\",children:\"This Week\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-raven-bg rounded-xl p-4 border border-raven-border text-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-400\",children:detailedStats.timeStats.thisMonth}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted\",children:\"This Month\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BarChart3,{size:18,className:\"text-raven-orange\"}),\"Top Artists\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:detailedStats.topArtists.slice(0,5).map((artist,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-raven-muted w-6\",children:index+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:artist.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-raven-muted\",children:[artist.plays,\" plays (\",artist.percentage,\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-2 bg-raven-bg rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r from-raven-orange to-raven-teal rounded-full\",style:{width:\"\".concat(artist.percentage,\"%\")}})})]})]},artist.name))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Disc,{size:18,className:\"text-raven-teal\"}),\"Top Albums\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-3\",children:detailedStats.topAlbums.map((album,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 p-3 rounded-lg bg-raven-bg border border-raven-border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-lg bg-gradient-to-br from-raven-orange/20 to-raven-teal/20 flex items-center justify-center text-raven-orange font-bold text-sm\",children:index+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-raven-text truncate\",children:album.album}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted truncate\",children:album.artist})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-raven-orange\",children:album.plays})]},album.album))})]})]}),activeTab==='stats'&&!detailedStats&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 text-raven-muted\",children:[/*#__PURE__*/_jsx(TrendingUp,{size:48,className:\"mx-auto mb-4 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No stats available yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Play some music to see your stats\"})]}),activeTab==='discover'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-raven-orange mb-4\",children:[/*#__PURE__*/_jsx(Sparkles,{size:20}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"AI-Powered Recommendations\"})]}),discoverLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-12\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"animate-spin text-raven-orange\",size:32}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-3 text-raven-muted\",children:\"Finding music you'll love...\"})]}):recommendations.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-4\",children:recommendations.map((rec,index)=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>rec.spotifyUrl&&window.open(rec.spotifyUrl,'_blank'),className:\"p-4 rounded-xl bg-raven-bg border border-raven-border hover:border-raven-orange/50 transition-all group cursor-pointer flex items-center gap-4\",children:[rec.image?/*#__PURE__*/_jsx(\"img\",{src:rec.image,alt:rec.title,className:\"w-16 h-16 rounded-lg object-cover flex-shrink-0\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-lg bg-raven-orange/20 flex items-center justify-center flex-shrink-0\",children:/*#__PURE__*/_jsx(Music,{size:28,className:\"text-raven-orange\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-1\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-raven-text group-hover:text-raven-orange transition-colors truncate\",children:rec.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"px-2 py-0.5 rounded-full bg-raven-orange/20 text-raven-orange text-xs font-medium flex-shrink-0\",children:[rec.match,\"% match\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted truncate\",children:rec.subtitle}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-raven-muted flex items-center gap-1 mt-1\",children:[/*#__PURE__*/_jsx(Star,{size:12,className:\"text-raven-orange\"}),rec.reason]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-raven-muted group-hover:text-raven-orange transition-colors\",children:/*#__PURE__*/_jsx(PlayCircle,{size:24})})]},index))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 text-raven-muted\",children:[/*#__PURE__*/_jsx(Disc,{size:48,className:\"mx-auto mb-4 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No recommendations available yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-2\",children:\"Keep listening to get personalized suggestions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 p-4 rounded-xl bg-gradient-to-r from-raven-orange/10 to-raven-teal/10 border border-raven-orange/30\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"font-semibold mb-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Sparkles,{size:16,className:\"text-raven-orange\"}),\"How it works\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-raven-muted\",children:\"These recommendations are generated by analyzing your listening history and querying Spotify's AI. We look at your top artists and find similar songs, filtering out remixes. Refreshed every 3 hours.\"})]})]})]})]})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","Pause","SkipBack","SkipForward","Heart","Clock","Music","TrendingUp","Search","Database","Disc","Loader2","PlayCircle","Sparkles","BarChart3","Star","StatCard","jsx","_jsx","jsxs","_jsxs","API_BASE","Spotify","_detailedStats$topArt","activeTab","setActiveTab","searchQuery","setSearchQuery","nowPlaying","setNowPlaying","recentTracks","setRecentTracks","database","setDatabase","plays","raw","stats","setStats","loading","setLoading","error","setError","controlling","setControlling","tabs","id","label","icon","fetchData","interval","setInterval","fetchNowPlaying","clearInterval","Promise","all","fetchRecentTracks","fetchDatabase","fetchStats","err","response","fetch","concat","data","json","console","controlPlayer","action","method","result","success","setTimeout","detailedStats","length","artistCounts","forEach","play","artist","topArtists","Object","entries","map","_ref","name","percentage","sort","a","b","slice","totalPlays","Math","round","avgSongDuration","totalMinutes","totalHours","floor","now","Date","today","toISOString","split","weekAgo","getTime","monthAgo","timeStats","filter","p","date","thisWeek","thisMonth","total","albumCounts","key","album","count","topAlbums","_ref2","totalListeningHours","avgDailyPlays","max","recommendations","setRecommendations","discoverLoading","setDiscoverLoading","fetchDiscover","ok","formatDuration","ms","totalSeconds","minutes","seconds","toString","padStart","filteredDatabase","track","toLowerCase","includes","className","children","size","isPlaying","image","src","alt","style","width","progress_ms","duration_ms","onClick","disabled","value","totalTracks","color","trend","listeningTime","topArtist","uniqueArtists","tab","Icon","index","duration","playedAt","type","placeholder","onChange","e","target","time","rec","spotifyUrl","window","open","title","match","subtitle","reason"],"sources":["/root/.openclaw/workspace/projects/raven-ops-center/src/pages/Spotify.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { \n  Play, \n  Pause, \n  SkipBack, \n  SkipForward, \n  Heart, \n  Clock,\n  Music,\n  TrendingUp,\n  Calendar,\n  Search,\n  Database,\n  Disc,\n  Loader2,\n  PlayCircle,\n  PauseCircle,\n  Sparkles,\n  Headphones,\n  BarChart3,\n  Star\n} from 'lucide-react';\nimport StatCard from '../components/StatCard';\n\nconst API_BASE = '/api/spotify';\n\ninterface Track {\n  name: string;\n  artist: string;\n  album: string;\n  image?: string;\n  duration_ms: number;\n  progress_ms: number;\n}\n\ninterface NowPlayingData {\n  isPlaying: boolean;\n  track: Track | null;\n  error?: string;\n}\n\ninterface RecentTrack {\n  name: string;\n  artist: string;\n  album: string;\n  playedAt: string;\n  duration: string;\n}\n\ninterface DatabasePlay {\n  date: string;\n  time: string;\n  track: string;\n  artist: string;\n  album: string;\n  source: string;\n  note: string;\n}\n\ninterface StatsData {\n  totalTracks: number;\n  listeningTime: string;\n  topArtist: string;\n  uniqueArtists: number;\n}\n\ninterface ArtistStat {\n  name: string;\n  plays: number;\n  percentage: number;\n}\n\ninterface TimeStats {\n  today: number;\n  thisWeek: number;\n  thisMonth: number;\n  total: number;\n}\n\nexport default function Spotify() {\n  const [activeTab, setActiveTab] = useState('recent');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [nowPlaying, setNowPlaying] = useState<NowPlayingData | null>(null);\n  const [recentTracks, setRecentTracks] = useState<RecentTrack[]>([]);\n  const [database, setDatabase] = useState<{plays: DatabasePlay[], raw: string}>({ plays: [], raw: '' });\n  const [stats, setStats] = useState<StatsData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [controlling, setControlling] = useState(false);\n\n  const tabs = [\n    { id: 'recent', label: 'Recent', icon: Clock },\n    { id: 'database', label: 'Database', icon: Database },\n    { id: 'stats', label: 'Stats', icon: TrendingUp },\n    { id: 'discover', label: 'Discover', icon: Disc },\n  ];\n\n  useEffect(() => {\n    fetchData();\n    const interval = setInterval(fetchNowPlaying, 10000);\n    return () => clearInterval(interval);\n  }, []);\n\n  async function fetchData() {\n    setLoading(true);\n    try {\n      await Promise.all([\n        fetchNowPlaying(),\n        fetchRecentTracks(),\n        fetchDatabase(),\n        fetchStats()\n      ]);\n    } catch (err) {\n      setError('Failed to load Spotify data');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function fetchNowPlaying() {\n    try {\n      const response = await fetch(`${API_BASE}/now-playing`);\n      const data = await response.json();\n      setNowPlaying(data);\n    } catch (err) {\n      console.error('Now playing error:', err);\n    }\n  }\n\n  async function fetchRecentTracks() {\n    try {\n      const response = await fetch(`${API_BASE}/recent-tracks`);\n      const data = await response.json();\n      setRecentTracks(data);\n    } catch (err) {\n      console.error('Recent tracks error:', err);\n    }\n  }\n\n  async function fetchDatabase() {\n    try {\n      const response = await fetch(`${API_BASE}/database`);\n      const data = await response.json();\n      setDatabase(data);\n    } catch (err) {\n      console.error('Database error:', err);\n    }\n  }\n\n  async function fetchStats() {\n    try {\n      const response = await fetch(`${API_BASE}/stats`);\n      const data = await response.json();\n      setStats(data);\n    } catch (err) {\n      console.error('Stats error:', err);\n    }\n  }\n\n  async function controlPlayer(action: 'play' | 'pause' | 'next' | 'previous') {\n    setControlling(true);\n    try {\n      const response = await fetch(`${API_BASE}/${action}`, { method: 'POST' });\n      const result = await response.json();\n      if (result.success) {\n        setTimeout(fetchNowPlaying, 500);\n      }\n    } catch (err) {\n      console.error('Control error:', err);\n    } finally {\n      setControlling(false);\n    }\n  }\n\n  // Calculate detailed stats from database\n  const detailedStats = useMemo(() => {\n    if (!database.plays.length) return null;\n\n    const plays = database.plays;\n    \n    // Artist frequency\n    const artistCounts: Record<string, number> = {};\n    plays.forEach(play => {\n      artistCounts[play.artist] = (artistCounts[play.artist] || 0) + 1;\n    });\n    \n    const topArtists: ArtistStat[] = Object.entries(artistCounts)\n      .map(([name, plays]) => ({ name, plays, percentage: 0 }))\n      .sort((a, b) => b.plays - a.plays)\n      .slice(0, 10);\n    \n    // Calculate percentages\n    const totalPlays = plays.length;\n    topArtists.forEach(artist => {\n      artist.percentage = Math.round((artist.plays / totalPlays) * 100);\n    });\n\n    // Time-based stats (assuming ~3 min per song average)\n    const avgSongDuration = 3;\n    const totalMinutes = plays.length * avgSongDuration;\n    const totalHours = Math.floor(totalMinutes / 60);\n    \n    // Parse dates for time-based analysis\n    const now = new Date();\n    const today = now.toISOString().split('T')[0];\n    const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n    const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];\n    \n    const timeStats: TimeStats = {\n      today: plays.filter(p => p.date === today).length,\n      thisWeek: plays.filter(p => p.date >= weekAgo).length,\n      thisMonth: plays.filter(p => p.date >= monthAgo).length,\n      total: plays.length\n    };\n\n    // Extract unique albums\n    const albumCounts: Record<string, { artist: string, count: number }> = {};\n    plays.forEach(play => {\n      const key = `${play.album}|${play.artist}`;\n      if (!albumCounts[key]) {\n        albumCounts[key] = { artist: play.artist, count: 0 };\n      }\n      albumCounts[key].count++;\n    });\n    \n    const topAlbums = Object.entries(albumCounts)\n      .map(([key, data]) => {\n        const [album] = key.split('|');\n        return { album, artist: data.artist, plays: data.count };\n      })\n      .sort((a, b) => b.plays - a.plays)\n      .slice(0, 5);\n\n    return {\n      topArtists,\n      timeStats,\n      topAlbums,\n      totalListeningHours: totalHours,\n      avgDailyPlays: Math.round(totalPlays / Math.max(1, plays.length > 0 ? \n        (new Date(plays[0].date).getTime() - new Date(plays[plays.length - 1].date).getTime()) / (1000 * 60 * 60 * 24) : 1))\n    };\n  }, [database.plays]);\n\n  const [recommendations, setRecommendations] = useState<any[]>([]);\n  const [discoverLoading, setDiscoverLoading] = useState(true);\n\n  // Fetch recommendations from API\n  useEffect(() => {\n    async function fetchDiscover() {\n      try {\n        setDiscoverLoading(true);\n        const response = await fetch(`${API_BASE}/discover`);\n        if (response.ok) {\n          const data = await response.json();\n          setRecommendations(data);\n        }\n      } catch (err) {\n        console.error('Discover fetch error:', err);\n        setRecommendations([]);\n      } finally {\n        setDiscoverLoading(false);\n      }\n    }\n    fetchDiscover();\n  }, []);\n\n  function formatDuration(ms: number) {\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = (totalSeconds % 60).toString().padStart(2, '0');\n    return `${minutes}:${seconds}`;\n  }\n\n  const filteredDatabase = database.plays.filter(play => \n    searchQuery === '' || \n    play.track.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    play.artist.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    play.album.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <Loader2 className=\"animate-spin text-raven-orange\" size={48} />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"mb-8\">\n        <h2 className=\"text-3xl font-bold mb-2\">\n          Spotify <span className=\"gradient-text\">Command Center</span>\n        </h2>\n        <p className=\"text-raven-muted\">Your music intelligence and listening analytics.</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Left Panel - Now Playing */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-gradient-to-br from-raven-card to-raven-bg rounded-2xl p-6 border border-raven-border sticky top-6\">\n            <h3 className=\"text-lg font-semibold mb-6 flex items-center gap-2\">\n              <Music className=\"text-raven-teal\" size={20} />\n              Now Playing\n            </h3>\n\n            {nowPlaying?.isPlaying && nowPlaying.track ? (\n              <div className=\"text-center\">\n                <div className=\"w-48 h-48 mx-auto mb-6 rounded-xl overflow-hidden shadow-2xl\">\n                  {nowPlaying.track.image ? (\n                    <img \n                      src={nowPlaying.track.image} \n                      alt={nowPlaying.track.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full bg-gradient-to-br from-raven-orange to-raven-teal flex items-center justify-center\">\n                      <Music size={64} className=\"text-white\" />\n                    </div>\n                  )}\n                </div>\n                \n                <h4 className=\"text-xl font-bold mb-1\">{nowPlaying.track.name}</h4>\n                <p className=\"text-raven-muted mb-4\">{nowPlaying.track.artist}</p>\n                <p className=\"text-sm text-raven-muted mb-6\">{nowPlaying.track.album}</p>\n\n                {/* Progress Bar */}\n                <div className=\"mb-6\">\n                  <div className=\"h-1 bg-raven-border rounded-full overflow-hidden\">\n                    <div \n                      className=\"h-full bg-gradient-to-r from-raven-orange to-raven-teal rounded-full transition-all\"\n                      style={{ \n                        width: `${(nowPlaying.track.progress_ms / nowPlaying.track.duration_ms) * 100}%` \n                      }}\n                    ></div>\n                  </div>\n                  <div className=\"flex justify-between text-xs text-raven-muted mt-2\">\n                    <span>{formatDuration(nowPlaying.track.progress_ms)}</span>\n                    <span>{formatDuration(nowPlaying.track.duration_ms)}</span>\n                  </div>\n                </div>\n\n                {/* Controls */}\n                <div className=\"flex items-center justify-center gap-6\">\n                  <button \n                    onClick={() => controlPlayer('previous')}\n                    disabled={controlling}\n                    className=\"p-2 text-raven-muted hover:text-raven-text transition-colors disabled:opacity-50\"\n                  >\n                    <SkipBack size={24} />\n                  </button>\n                  <button \n                    onClick={() => controlPlayer('pause')}\n                    disabled={controlling}\n                    className=\"w-14 h-14 rounded-full bg-gradient-to-br from-raven-orange to-raven-teal flex items-center justify-center text-white hover:scale-105 transition-transform disabled:opacity-50\"\n                  >\n                    <Pause size={28} />\n                  </button>\n                  <button \n                    onClick={() => controlPlayer('next')}\n                    disabled={controlling}\n                    className=\"p-2 text-raven-muted hover:text-raven-text transition-colors disabled:opacity-50\"\n                  >\n                    <SkipForward size={24} />\n                  </button>\n                </div>\n\n                <button className=\"mt-6 w-full py-3 rounded-lg border border-raven-border text-raven-muted hover:text-raven-orange hover:border-raven-orange transition-colors flex items-center justify-center gap-2\">\n                  <Heart size={18} />\n                  Add to Database\n                </button>\n              </div>\n            ) : (\n              <div className=\"text-center py-12\">\n                <div className=\"w-32 h-32 mx-auto mb-6 rounded-xl bg-raven-border flex items-center justify-center\">\n                  <Music size={48} className=\"text-raven-muted\" />\n                </div>\n                <p className=\"text-raven-muted mb-4\">Nothing playing right now</p>\n                <button \n                  onClick={() => controlPlayer('play')}\n                  disabled={controlling}\n                  className=\"px-6 py-3 rounded-full bg-gradient-to-br from-raven-orange to-raven-teal text-white hover:scale-105 transition-transform disabled:opacity-50 flex items-center gap-2 mx-auto\"\n                >\n                  <PlayCircle size={20} />\n                  Resume Playback\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Right Panel */}\n        <div className=\"lg:col-span-2 space-y-6\">\n          {/* Stats Cards */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <StatCard \n              label=\"Total Tracks\" \n              value={stats?.totalTracks.toString() || detailedStats?.timeStats.total.toString() || '0'} \n              icon={Database}\n              color=\"from-raven-orange to-orange-400\"\n              trend=\"In database\"\n            />\n            <StatCard \n              label=\"Listening Time\" \n              value={detailedStats ? `${detailedStats.totalListeningHours}h` : (stats?.listeningTime || '0h')} \n              icon={Clock}\n              color=\"from-raven-teal to-teal-400\"\n              trend=\"Estimated\"\n            />\n            <StatCard \n              label=\"Top Artist\" \n              value={detailedStats?.topArtists[0]?.name || stats?.topArtist || 'Unknown'} \n              icon={Music}\n              color=\"from-purple-500 to-pink-500\"\n              trend=\"Most played\"\n            />\n            <StatCard \n              label=\"Unique Artists\" \n              value={stats?.uniqueArtists.toString() || detailedStats?.topArtists.length.toString() || '0'} \n              icon={TrendingUp}\n              color=\"from-blue-500 to-cyan-500\"\n              trend=\"All time\"\n            />\n          </div>\n\n          {/* Tabs */}\n          <div className=\"bg-raven-card rounded-xl border border-raven-border overflow-hidden\">\n            <div className=\"flex border-b border-raven-border\">\n              {tabs.map((tab) => {\n                const Icon = tab.icon;\n                return (\n                  <button\n                    key={tab.id}\n                    onClick={() => setActiveTab(tab.id)}\n                    className={`flex-1 flex items-center justify-center gap-2 py-4 text-sm font-medium transition-colors ${\n                      activeTab === tab.id\n                        ? 'text-raven-orange border-b-2 border-raven-orange bg-raven-orange/5'\n                        : 'text-raven-muted hover:text-raven-text'\n                    }`}\n                  >\n                    <Icon size={16} />\n                    {tab.label}\n                  </button>\n                );\n              })}\n            </div>\n\n            <div className=\"p-6\">\n              {/* Recent Tab */}\n              {activeTab === 'recent' && (\n                <div className=\"space-y-4\">\n                  <h4 className=\"font-semibold mb-4\">Recently Played (Last 3)</h4>\n                  {recentTracks.length > 0 ? (\n                    recentTracks.slice(0, 3).map((track, index) => (\n                      <div \n                        key={index} \n                        className=\"flex items-center gap-4 p-4 rounded-lg bg-raven-bg border border-raven-border hover:border-raven-orange/30 transition-colors\"\n                      >\n                        <div className=\"w-12 h-12 rounded-lg bg-gradient-to-br from-raven-orange/20 to-raven-teal/20 flex items-center justify-center\">\n                          <Music size={20} className=\"text-raven-muted\" />\n                        </div>\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-raven-text\">{track.name}</p>\n                          <p className=\"text-sm text-raven-muted\">{track.artist} • {track.album}</p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"text-sm text-raven-muted\">{track.duration}</p>\n                          <p className=\"text-xs text-raven-muted\">{track.playedAt}</p>\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <div className=\"text-center py-8 text-raven-muted\">\n                      <Music size={48} className=\"mx-auto mb-4 opacity-30\" />\n                      <p>No recent tracks from Spotify API</p>\n                      <p className=\"text-sm mt-2\">Check Database tab for your history</p>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Database Tab */}\n              {activeTab === 'database' && (\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center gap-4 mb-6\">\n                    <div className=\"relative flex-1\">\n                      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-raven-muted\" size={18} />\n                      <input\n                        type=\"text\"\n                        placeholder=\"Search your music database...\"\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        className=\"w-full bg-raven-bg border border-raven-border rounded-lg pl-10 pr-4 py-2 text-sm text-raven-text placeholder-raven-muted focus:outline-none focus:border-raven-orange transition-colors\"\n                      />\n                    </div>\n                    <button className=\"px-4 py-2 rounded-lg bg-raven-orange text-white text-sm hover:bg-raven-orange/80 transition-colors\">\n                      Export CSV\n                    </button>\n                  </div>\n                  \n                  <p className=\"text-sm text-raven-muted mb-4\">\n                    Showing {filteredDatabase.length} tracks from your database\n                  </p>\n                  \n                  {filteredDatabase.length > 0 ? (\n                    <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n                      {filteredDatabase.map((play, index) => (\n                        <div \n                          key={index} \n                          className=\"flex items-center gap-4 p-3 rounded-lg bg-raven-bg border border-raven-border hover:border-raven-orange/30 transition-colors\"\n                        >\n                          <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-raven-orange/20 to-raven-teal/20 flex items-center justify-center flex-shrink-0\">\n                            <Music size={16} className=\"text-raven-muted\" />\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"font-medium text-raven-text truncate\">{play.track}</p>\n                            <p className=\"text-sm text-raven-muted truncate\">{play.artist} • {play.album}</p>\n                          </div>\n                          <div className=\"text-right text-xs text-raven-muted\">\n                            <p>{play.date}</p>\n                            <p>{play.time}</p>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-12 text-raven-muted\">\n                      <Database size={48} className=\"mx-auto mb-4 opacity-30\" />\n                      <p>{searchQuery ? 'No tracks match your search' : 'No tracks in database'}</p>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Stats Tab - NOW FULLY IMPLEMENTED */}\n              {activeTab === 'stats' && detailedStats && (\n                <div className=\"space-y-6\">\n                  {/* Time Stats */}\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <div className=\"bg-raven-bg rounded-xl p-4 border border-raven-border text-center\">\n                      <p className=\"text-2xl font-bold text-raven-orange\">{detailedStats.timeStats.today}</p>\n                      <p className=\"text-sm text-raven-muted\">Today</p>\n                    </div>\n                    <div className=\"bg-raven-bg rounded-xl p-4 border border-raven-border text-center\">\n                      <p className=\"text-2xl font-bold text-raven-teal\">{detailedStats.timeStats.thisWeek}</p>\n                      <p className=\"text-sm text-raven-muted\">This Week</p>\n                    </div>\n                    <div className=\"bg-raven-bg rounded-xl p-4 border border-raven-border text-center\">\n                      <p className=\"text-2xl font-bold text-purple-400\">{detailedStats.timeStats.thisMonth}</p>\n                      <p className=\"text-sm text-raven-muted\">This Month</p>\n                    </div>\n                  </div>\n\n                  {/* Top Artists */}\n                  <div>\n                    <h4 className=\"font-semibold mb-4 flex items-center gap-2\">\n                      <BarChart3 size={18} className=\"text-raven-orange\" />\n                      Top Artists\n                    </h4>\n                    <div className=\"space-y-3\">\n                      {detailedStats.topArtists.slice(0, 5).map((artist, index) => (\n                        <div key={artist.name} className=\"flex items-center gap-4\">\n                          <span className=\"text-raven-muted w-6\">{index + 1}</span>\n                          <div className=\"flex-1\">\n                            <div className=\"flex justify-between mb-1\">\n                              <span className=\"font-medium\">{artist.name}</span>\n                              <span className=\"text-sm text-raven-muted\">{artist.plays} plays ({artist.percentage}%)</span>\n                            </div>\n                            <div className=\"h-2 bg-raven-bg rounded-full overflow-hidden\">\n                              <div \n                                className=\"h-full bg-gradient-to-r from-raven-orange to-raven-teal rounded-full\"\n                                style={{ width: `${artist.percentage}%` }}\n                              />\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Top Albums */}\n                  <div>\n                    <h4 className=\"font-semibold mb-4 flex items-center gap-2\">\n                      <Disc size={18} className=\"text-raven-teal\" />\n                      Top Albums\n                    </h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                      {detailedStats.topAlbums.map((album, index) => (\n                        <div key={album.album} className=\"flex items-center gap-3 p-3 rounded-lg bg-raven-bg border border-raven-border\">\n                          <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-raven-orange/20 to-raven-teal/20 flex items-center justify-center text-raven-orange font-bold text-sm\">\n                            {index + 1}\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"font-medium text-raven-text truncate\">{album.album}</p>\n                            <p className=\"text-sm text-raven-muted truncate\">{album.artist}</p>\n                          </div>\n                          <span className=\"text-sm text-raven-orange\">{album.plays}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {activeTab === 'stats' && !detailedStats && (\n                <div className=\"text-center py-12 text-raven-muted\">\n                  <TrendingUp size={48} className=\"mx-auto mb-4 opacity-50\" />\n                  <p>No stats available yet</p>\n                  <p className=\"text-sm mt-2\">Play some music to see your stats</p>\n                </div>\n              )}\n\n              {/* Discover Tab - NOW WITH REAL API */}\n              {activeTab === 'discover' && (\n                <div className=\"space-y-6\">\n                  <div className=\"flex items-center gap-2 text-raven-orange mb-4\">\n                    <Sparkles size={20} />\n                    <span className=\"font-semibold\">AI-Powered Recommendations</span>\n                  </div>\n\n                  {discoverLoading ? (\n                    <div className=\"flex items-center justify-center py-12\">\n                      <Loader2 className=\"animate-spin text-raven-orange\" size={32} />\n                      <span className=\"ml-3 text-raven-muted\">Finding music you'll love...</span>\n                    </div>\n                  ) : recommendations.length > 0 ? (\n                    <div className=\"grid grid-cols-1 gap-4\">\n                      {recommendations.map((rec, index) => (\n                        <div\n                          key={index}\n                          onClick={() => rec.spotifyUrl && window.open(rec.spotifyUrl, '_blank')}\n                          className=\"p-4 rounded-xl bg-raven-bg border border-raven-border hover:border-raven-orange/50 transition-all group cursor-pointer flex items-center gap-4\"\n                        >\n                          {rec.image ? (\n                            <img\n                              src={rec.image}\n                              alt={rec.title}\n                              className=\"w-16 h-16 rounded-lg object-cover flex-shrink-0\"\n                            />\n                          ) : (\n                            <div className=\"w-16 h-16 rounded-lg bg-raven-orange/20 flex items-center justify-center flex-shrink-0\">\n                              <Music size={28} className=\"text-raven-orange\" />\n                            </div>\n                          )}\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <h5 className=\"font-semibold text-raven-text group-hover:text-raven-orange transition-colors truncate\">\n                                {rec.title}\n                              </h5>\n                              <span className=\"px-2 py-0.5 rounded-full bg-raven-orange/20 text-raven-orange text-xs font-medium flex-shrink-0\">\n                                {rec.match}% match\n                              </span>\n                            </div>\n                            <p className=\"text-sm text-raven-muted truncate\">{rec.subtitle}</p>\n                            <p className=\"text-xs text-raven-muted flex items-center gap-1 mt-1\">\n                              <Star size={12} className=\"text-raven-orange\" />\n                              {rec.reason}\n                            </p>\n                          </div>\n                          <div className=\"text-raven-muted group-hover:text-raven-orange transition-colors\">\n                            <PlayCircle size={24} />\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-12 text-raven-muted\">\n                      <Disc size={48} className=\"mx-auto mb-4 opacity-50\" />\n                      <p>No recommendations available yet</p>\n                      <p className=\"text-sm mt-2\">Keep listening to get personalized suggestions</p>\n                    </div>\n                  )}\n\n                  <div className=\"mt-6 p-4 rounded-xl bg-gradient-to-r from-raven-orange/10 to-raven-teal/10 border border-raven-orange/30\">\n                    <h5 className=\"font-semibold mb-2 flex items-center gap-2\">\n                      <Sparkles size={16} className=\"text-raven-orange\" />\n                      How it works\n                    </h5>\n                    <p className=\"text-sm text-raven-muted\">\n                      These recommendations are generated by analyzing your listening history and\n                      querying Spotify's AI. We look at your top artists and find similar songs,\n                      filtering out remixes. Refreshed every 3 hours.\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}